<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>التقارير العسكرية - وزارة الداخلية</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* التنسيقات الأساسية */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            display: flex;
            min-height: 100vh;
        }
        
        /* الشريط الجانبي */
        .sidebar {
            width: 250px;
            background: linear-gradient(to bottom, #1e3c72, #2a5298);
            color: white;
            padding: 20px 0;
            height: 100vh;
            position: fixed;
            right: 0;
            top: 0;
            overflow-y: auto;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        }
        
        .sidebar-title {
            text-align: center;
            margin-bottom: 30px;
            padding: 0 15px;
            font-size: 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 15px;
        }
        
        .sidebar a {
            display: flex;
            align-items: center;
            color: white;
            padding: 12px 20px;
            text-decoration: none;
            transition: 0.3s;
            border-right: 3px solid transparent;
        }
        
        .sidebar a i {
            margin-left: 10px;
            font-size: 1.2rem;
        }
        
        .sidebar a:hover, .sidebar a.active {
            background-color: rgba(255,255,255,0.1);
            border-right: 3px solid #4CAF50;
        }
        
        /* المحتوى الرئيسي */
        .content {
            flex: 1;
            margin-right: 250px;
            padding: 20px;
        }
        
        /* شريط التنقل العلوي */
        .top-nav {
            background-color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-btn {
            background-color: #2a5298;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            transition: 0.3s;
            display: flex;
            align-items: center;
        }
        
        .nav-btn i {
            margin-right: 5px;
        }
        
        .nav-btn:hover {
            background-color: #1e3c72;
        }
        
        /* عنوان الصفحة */
        .page-title {
            color: #1e3c72;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #2a5298;
            display: flex;
            align-items: center;
        }
        
        .page-title i {
            margin-left: 10px;
        }
        
        /* الأزرار */
        .btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 1rem;
            display: flex;
            align-items: center;
        }
        
        .btn:hover {
            background-color: #388E3C;
        }
        
        .btn.add {
            background-color: #2196F3;
            margin-bottom: 20px;
        }
        
        .btn.add:hover {
            background-color: #1976D2;
        }
        
        .btn i {
            margin-left: 8px;
        }
        
        .view {
            background-color: #FF9800;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
        }
        
        .view:hover {
            background-color: #F57C00;
        }
        
        .view i {
            margin-left: 5px;
        }
        
        /* الجداول */
        .table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .table th, .table td {
            padding: 15px;
            text-align: right;
            border-bottom: 1px solid #ddd;
        }
        
        .table th {
            background-color: #2a5298;
            color: white;
            font-weight: 600;
        }
        
        .table tr:hover {
            background-color: #f9f9f9;
        }
        
        /* لوحة البلاغات */
        .panel {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
        
        .panel.glow {
            border-top: 4px solid #4CAF50;
        }
        
        .title {
            color: #1e3c72;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .title i {
            margin-left: 10px;
        }
        
        .neo-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .neo-table th, .neo-table td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid #eee;
        }
        
        .neo-table th {
            background-color: #f5f5f5;
            color: #333;
            font-weight: 600;
        }
        
        .badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            display: inline-block;
        }
        
        .badge.green {
            background-color: #E8F5E9;
            color: #2E7D32;
        }
        
        .badge.red {
            background-color: #FFEBEE;
            color: #C62828;
        }
        
        .badge.orange {
            background-color: #FFF3E0;
            color: #EF6C00;
        }
        
        .neo-btn {
            background-color: #2196F3;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
        }
        
        .neo-btn:hover {
            background-color: #1976D2;
        }
        
        .neo-btn i {
            margin-left: 5px;
        }
        
        /* النافذة المنبثقة */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 25px;
            border-radius: 10px;
            width: 80%;
            max-width: 700px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        
        .modal h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .modal h2 i {
            margin-left: 10px;
        }
        
        .modal label {
            display: block;
            margin: 15px 0 8px;
            font-weight: bold;
            color: #555;
        }
        
        .modal input, .modal select, .modal textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 5px;
            font-size: 1rem;
        }
        
        .modal input:focus, .modal select:focus, .modal textarea:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 0 2px rgba(42, 82, 152, 0.2);
        }
        
        .modal textarea {
            height: 150px;
            resize: vertical;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-start;
            margin-top: 25px;
            gap: 10px;
        }
        
        .close-btn {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
        }
        
        .close-btn:hover {
            background-color: #d32f2f;
        }
        
        .close-btn i {
            margin-left: 5px;
        }
        
        /* زر الإغلاق */
        .close {
            color: #aaa;
            position: absolute;
            left: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: black;
        }
        
        /* أزرار الإجراءات */
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .delete-btn {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
        }
        
        .delete-btn:hover {
            background-color: #d32f2f;
        }
        
        .delete-btn i {
            margin-left: 5px;
        }
        
        .edit-btn {
            background-color: #FF9800;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
        }
        
        .edit-btn:hover {
            background-color: #F57C00;
        }
        
        .edit-btn i {
            margin-left: 5px;
        }
        
        /* حالة التقرير */
        .report-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            display: inline-block;
        }
        
        .report-status.completed {
            background-color: #E8F5E9;
            color: #2E7D32;
        }
        
        .report-status.pending {
            background-color: #FFF3E0;
            color: #EF6C00;
        }
        
        .report-status.cancelled {
            background-color: #FFEBEE;
            color: #C62828;
        }
        
        /* التكيف مع الشاشات الصغيرة */
        @media (max-width: 768px) {
            .sidebar {
                width: 70px;
            }
            
            .sidebar-title, .sidebar a span {
                display: none;
            }
            
            .sidebar a {
                justify-content: center;
                padding: 15px;
            }
            
            .sidebar a i {
                margin-left: 0;
            }
            
            .content {
                margin-right: 70px;
            }
            
            .table {
                display: block;
                overflow-x: auto;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>

    <!-- نافذة إضافة التقرير -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeReportModal()">&times;</span>
            <h2 id="modal-title"><i class="fas fa-file-medical"></i> إضافة تقرير جديد</h2>
            
            <form id="reportForm">
                <label>اسم العسكري:</label>
                <select id="reportSoldier" required>
                    <option value="">-- اختر العسكري --</option>
                    <option value="سعود">سعود</option>
                    <option value="أحمد">أحمد</option>
                    <option value="محمد">محمد</option>
                    <option value="خالد">خالد</option>
                    <option value="فهد">فهد</option>
                </select>
                
                <label>نوع التقرير:</label>
                <select id="reportType" required>
                    <option value="">-- اختر نوع التقرير --</option>
                    <option value="مهمة ميدانية">مهمة ميدانية</option>
                    <option value="تفتيش">تفتيش</option>
                    <option value="تدريب">تدريب</option>
                    <option value="أمني">أمني</option>
                    <option value="إداري">إداري</option>
                    <option value="استخباراتي">استخباراتي</option>
                    <option value="لوجستي">لوجستي</option>
                </select>
                
                <label>التاريخ:</label>
                <input type="date" id="reportDate" required>
                
                <label>حالة التقرير:</label>
                <select id="reportStatus">
                    <option value="مكتمل">مكتمل</option>
                    <option value="قيد المراجعة">قيد المراجعة</option>
                    <option value="ملغى">ملغى</option>
                </select>
                
                <label>التفاصيل:</label>
                <textarea id="reportDetails" placeholder="أدخل تفاصيل التقرير هنا..." required></textarea>
                
                <label>رفع ملف (اختياري):</label>
                <input type="file" id="reportFile">
                
                <div class="modal-buttons">
                    <button type="button" id="saveReport" class="btn"><i class="fas fa-save"></i> حفظ التقرير</button>
                    <button type="button" class="close-btn" onclick="closeReportModal()"><i class="fas fa-times"></i> إلغاء</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- نافذة عرض التقرير -->
    <div id="viewReportModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeViewReportModal()">&times;</span>
            <h2 id="view-modal-title"><i class="fas fa-file-alt"></i> عرض التقرير</h2>
            
            <div id="reportContent">
                <!-- سيتم ملء محتوى التقرير هنا بواسطة JavaScript -->
            </div>
            
            <div class="modal-buttons">
                <button type="button" class="close-btn" onclick="closeViewReportModal()"><i class="fas fa-times"></i> إغلاق</button>
            </div>
        </div>
    </div>

    <!-- زر الرجوع -->
    <div class="top-nav">
        <a href="dashboard.html" class="nav-btn" id="home-btn">
            <i class="fas fa-arrow-right"></i> الرجوع للقائمة الرئيسية
        </a>
        <div>
            <span id="currentDate" style="color: #1e3c72; font-weight: bold;"></span>
        </div>
    </div>

    <aside class="sidebar">
        <h2 class="sidebar-title">الداخلية</h2>
        <a href="/HTML/dashboard.html">
            <i class="fas fa-tachometer-alt"></i>
            <span>لوحة التحكم</span>
        </a>
        <a href="/HTML/soldiers.html">
            <i class="fas fa-users"></i>
            <span>إدارة العساكر</span>
        </a>
        <a href="/HTML/reports.html" class="active">
            <i class="fas fa-file-alt"></i>
            <span>التقارير</span>
        </a>
        <a href="https://docs.google.com/spreadsheets/d/1yZ7hI57QrD9jdbdNamOX5vXsgrda9bOpOUbX2WMzdiw/edit?gid=0#gid=0">
            <i class="fas fa-table"></i>
            <span>جدول الوزارة</span>
        </a>
        <a href="https://docs.google.com/document/d/1arc-CyNVAr3pQRgmWHCorJRb407QufIKWwndy9s-H2o/edit?tab=t.0">
            <i class="fas fa-book"></i>
            <span>كتيب الوزارة</span>
        </a>
    </aside>

    <!-- المحتوى الرئيسي -->
    <div class="content">
        <!-- عنوان القسم -->
        <h1 class="page-title"><i class="fas fa-file-alt"></i> التقارير العسكرية</h1>

        <!-- زر الإضافة -->
        <button class="btn add" onclick="openReportModal()"><i class="fas fa-plus"></i> إضافة تقرير جديد</button>

        <!-- جدول التقارير -->
        <table class="table">
            <thead>
                <tr>
                    <th>اسم العسكري</th>
                    <th>نوع التقرير</th>
                    <th>التاريخ</th>
                    <th>الحالة</th>
                    <th>الإجراءات</th>
                </tr>
            </thead>
            <tbody id="reportsTableBody">
                <!-- سيتم ملء البيانات هنا بواسطة JavaScript -->
            </tbody>
        </table>

        <!-- لوحة البلاغات -->
        <div class="panel glow">
            <h1 class="title"><i class="fas fa-exclamation-circle"></i> إدارة البلاغات</h1>

            <table class="neo-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>نوع البلاغ</th>
                        <th>الحالة</th>
                        <th>اللاعب</th>
                        <th>التاريخ</th>
                        <th>الإجراءات</th>
                    </tr>
                </thead>

                <tbody id="reportsTable">
                    <tr>
                        <td>#102</td>
                        <td>مشاجرة</td>
                        <td><span class="badge green">مفتوح</span></td>
                        <td>Player01</td>
                        <td>2025-01-15</td>
                        <td><button class="neo-btn"><i class="fas fa-eye"></i> عرض</button></td>
                    </tr>
                    <tr>
                        <td>#101</td>
                        <td>مخالفة مرورية</td>
                        <td><span class="badge orange">قيد المعالجة</span></td>
                        <td>Player02</td>
                        <td>2025-01-14</td>
                        <td><button class="neo-btn"><i class="fas fa-eye"></i> عرض</button></td>
                    </tr>
                    <tr>
                        <td>#100</td>
                        <td>سرقة</td>
                        <td><span class="badge red">مغلق</span></td>
                        <td>Player03</td>
                        <td>2025-01-13</td>
                        <td><button class="neo-btn"><i class="fas fa-eye"></i> عرض</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // بيانات التقارير (يمكن استبدالها بقاعدة بيانات حقيقية)
        let reports = [
            { 
                id: 1, 
                soldierName: "سعود", 
                type: "مهمة ميدانية", 
                date: "2025-01-12", 
                status: "مكتمل",
                details: "تم تنفيذ مهمة ميدانية في المنطقة الشمالية بنجاح. شملت المهمة مراقبة الحدود وتأمين المحيط. لم يتم تسجيل أي حوادث أو مخالفات خلال تنفيذ المهمة." 
            },
            { 
                id: 2, 
                soldierName: "أحمد", 
                type: "تفتيش", 
                date: "2025-01-10", 
                status: "مكتمل",
                details: "تم إجراء تفتيش روتيني للمركز الأمني. شمل التفتيش فحص الأسلحة والمعدات والتحقق من جاهزية الطاقم. جميع النقاط كانت مطابقة للمعايير المطلوبة." 
            },
            { 
                id: 3, 
                soldierName: "محمد", 
                type: "تدريب", 
                date: "2025-01-08", 
                status: "قيد المراجعة",
                details: "تم عقد دورة تدريبية على استخدام الأسلحة الجديدة. استمر التدريب لمدة 3 أيام وشارك فيه 25 عسكرياً. سيتم تقييم النتائج وإعداد التقرير النهائي قريباً." 
            },
            { 
                id: 4, 
                soldierName: "خالد", 
                type: "أمني", 
                date: "2025-01-05", 
                status: "مكتمل",
                details: "تم تعزيز الإجراءات الأمنية حول المقر الرئيسي بعد تلقي معلومات عن تهديد محتمل. تم نشر دوريات إضافية ورفع مستوى التأهب." 
            },
            { 
                id: 5, 
                soldierName: "فهد", 
                type: "إداري", 
                date: "2025-01-03", 
                status: "ملغى",
                details: "تم إلغاء التقرير الإداري المقرر بسبب عدم اكتمال البيانات المطلوبة. سيتم إعادة جدولته بعد استكمال المعلومات الناقصة." 
            }
        ];
        
        // متغيرات للتعديل
        let editingReportId = null;
        
        // عرض التاريخ الحالي
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('ar-SA');
        
        // عرض التقارير في الجدول
        function displayReports() {
            const tableBody = document.getElementById('reportsTableBody');
            tableBody.innerHTML = '';
            
            reports.forEach(report => {
                const statusClass = getStatusClass(report.status);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${report.soldierName}</td>
                    <td>${report.type}</td>
                    <td>${report.date}</td>
                    <td><span class="report-status ${statusClass}">${report.status}</span></td>
                    <td class="action-buttons">
                        <button class="view" onclick="viewReport(${report.id})"><i class="fas fa-eye"></i> عرض</button>
                        <button class="edit-btn" onclick="editReport(${report.id})"><i class="fas fa-edit"></i> تعديل</button>
                        <button class="delete-btn" onclick="deleteReport(${report.id})"><i class="fas fa-trash"></i> حذف</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        // الحصول على كلاس الحالة
        function getStatusClass(status) {
            switch(status) {
                case 'مكتمل': return 'completed';
                case 'قيد المراجعة': return 'pending';
                case 'ملغى': return 'cancelled';
                default: return 'pending';
            }
        }
        
        // فتح نافذة إضافة التقرير
        function openReportModal() {
            editingReportId = null;
            document.getElementById('modal-title').innerHTML = '<i class="fas fa-file-medical"></i> إضافة تقرير جديد';
            document.getElementById('reportForm').reset();
            document.getElementById('reportDate').valueAsDate = new Date();
            document.getElementById('reportModal').style.display = 'block';
        }
        
        // إغلاق نافذة إضافة التقرير
        function closeReportModal() {
            document.getElementById('reportModal').style.display = 'none';
        }
        
        // فتح نافذة عرض التقرير
        function viewReport(id) {
            const report = reports.find(r => r.id === id);
            if (report) {
                const statusClass = getStatusClass(report.status);
                document.getElementById('view-modal-title').innerHTML = `<i class="fas fa-file-alt"></i> تقرير ${report.type}`;
                document.getElementById('reportContent').innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div>
                            <strong>اسم العسكري:</strong>
                            <p>${report.soldierName}</p>
                        </div>
                        <div>
                            <strong>نوع التقرير:</strong>
                            <p>${report.type}</p>
                        </div>
                        <div>
                            <strong>التاريخ:</strong>
                            <p>${report.date}</p>
                        </div>
                        <div>
                            <strong>الحالة:</strong>
                            <p><span class="report-status ${statusClass}">${report.status}</span></p>
                        </div>
                    </div>
                    <div>
                        <strong>التفاصيل:</strong>
                        <div style="background-color: #f9f9f9; padding: 15px; border-radius: 5px; margin-top: 10px; line-height: 1.6;">
                            ${report.details}
                        </div>
                    </div>
                `;
                document.getElementById('viewReportModal').style.display = 'block';
            }
        }
        
        // إغلاق نافذة عرض التقرير
        function closeViewReportModal() {
            document.getElementById('viewReportModal').style.display = 'none';
        }
        
        // تعديل التقرير
        function editReport(id) {
            const report = reports.find(r => r.id === id);
            if (report) {
                editingReportId = id;
                document.getElementById('modal-title').innerHTML = '<i class="fas fa-edit"></i> تعديل التقرير';
                document.getElementById('reportSoldier').value = report.soldierName;
                document.getElementById('reportType').value = report.type;
                document.getElementById('reportDate').value = report.date;
                document.getElementById('reportStatus').value = report.status;
                document.getElementById('reportDetails').value = report.details;
                document.getElementById('reportModal').style.display = 'block';
            }
        }
        
        // حذف التقرير
        function deleteReport(id) {
            if (confirm('هل أنت متأكد من حذف هذا التقرير؟')) {
                reports = reports.filter(report => report.id !== id);
                displayReports();
                alert('تم حذف التقرير بنجاح');
            }
        }
        
        // حفظ التقرير
        document.getElementById('saveReport').addEventListener('click', function() {
            const soldierName = document.getElementById('reportSoldier').value;
            const type = document.getElementById('reportType').value;
            const date = document.getElementById('reportDate').value;
            const status = document.getElementById('reportStatus').value;
            const details = document.getElementById('reportDetails').value;
            
            if (!soldierName || !type || !date || !details) {
                alert('يرجى ملء جميع الحقول المطلوبة');
                return;
            }
            
            if (editingReportId) {
                // تعديل التقرير الموجود
                const reportIndex = reports.findIndex(r => r.id === editingReportId);
                if (reportIndex !== -1) {
                    reports[reportIndex] = {
                        ...reports[reportIndex],
                        soldierName,
                        type,
                        date,
                        status,
                        details
                    };
                }
                alert('تم تعديل التقرير بنجاح');
            } else {
                // إضافة تقرير جديد
                const newReport = {
                    id: reports.length > 0 ? Math.max(...reports.map(r => r.id)) + 1 : 1,
                    soldierName,
                    type,
                    date,
                    status,
                    details
                };
                
                reports.push(newReport);
                alert('تم إضافة التقرير بنجاح');
            }
            
            displayReports();
            closeReportModal();
        });
        
        // إغلاق النوافذ المنبثقة عند النقر خارجها
        window.onclick = function(event) {
            const modal = document.getElementById('reportModal');
            const viewModal = document.getElementById('viewReportModal');
            
            if (event.target === modal) {
                closeReportModal();
            }
            
            if (event.target === viewModal) {
                closeViewReportModal();
            }
        }
        
        // تهيئة الصفحة عند التحميل
        document.addEventListener('DOMContentLoaded', function() {
            displayReports();
        });
    </script>
</body>
</html>